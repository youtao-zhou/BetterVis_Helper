# Network Plot {#network}

### At the Beginning

BetterVis package must be loaded beforehand.

```r
# library(BetterVis)
```

## BetterVis_Network_PPI

To address the common need for visualizing gene interactions in medical research, we developed `BetterVis_Network_PPI`. This function is specifically designed for plotting protein-protein interaction (PPI) networks.

### Data Input

```r
# 为演示创建样本数据
# In your project, you would load this using: 
# nodes <- data("BetterVis_Network_PPI_nodes", package="BetterVis")
# edges <- data("BetterVis_Network_PPI_edges", package="BetterVis")

set.seed(123)
nodes <- data.frame(
  name = paste0("Gene", 1:20),
  full = runif(20),
  within5 = runif(20),
  after5 = runif(20),
  early = runif(20),
  late = runif(20),
  manual_grp = sample(c("Group A", "Group B", "Group C"), 20, replace = TRUE)
)

edges <- data.frame(
  from = sample(nodes$name, 40, replace = TRUE),
  to = sample(nodes$name, 40, replace = TRUE),
  weight = runif(40, 0.1, 2)
)
# 确保没有自环
edges <- subset(edges, from != to)

colors <- c('#CD8280','#54D0B4','#78C3ED', '#E69F00', '#E98FBD')
```

### Usage Example

```r
# 注意：由于未提供函数源代码，此代码块设置为不执行 (eval=FALSE)
# NOTE: This chunk is set to not run (eval=FALSE) as the function source was not provided.
BetterVis_Network_PPI(nodes_data = nodes, edges_data =  edges,
  fill_vars = c("full","within5","after5","early","late"),
  fill_color = colors,
  group_var = "manual_grp",
  node_size = c(0.08, 0.25), node_text_size = 4,
  line_size = c(0.5, 2.5), line_color = "grey65",
  niter = 800, display_border = TRUE)
```
![](images/network_ppi.png)

### Parameter explanation

**`nodes_data`**: A data frame containing information for the plot's nodes, including their categories.

**`edges_data`**: A data frame containing information for the edges (lines), including connection strength or weight.

**`fill_vars`**: The name of the column in `nodes_data` that will be used to determine the fill color of the nodes.

**`fill_color`**: A vector of colors to use for the node fills.

**`group_var`**: The name of the column used to group nodes together with a surrounding dashed box.

**`node_size`**: A numeric vector of length 2 specifying the size range for the nodes. Default: `c(0.1, 0.3)`.

**`node_text_size`**: A numeric value for the font size of the node labels. Default: `4`.

**`line_size`**: A numeric vector of length 2 specifying the range for the line (edge) thickness. Default: `c(0.5, 2.5)`.

**`line_color`**: The color of the lines (edges). Default: `"grey65"`.

**`niter`**: A numeric value controlling the layout algorithm's iterations, which affects node spread. Default: `800`.

**`display_border`**: A logical value (`TRUE`/`FALSE`) indicating whether to display the dashed border boxes around the groups defined by `group_var`.

### Important Note

The `fill_var` parameter supports a minimum of 2 and a maximum of 5 distinct categories for color mapping.

The `group_var` parameter is optional. If it is not provided, the dashed border boxes around groups will not be drawn.
